#define NULL ((void*)0)
typedef unsigned long size_t;  // Customize by platform.
typedef long intptr_t; typedef unsigned long uintptr_t;
typedef long scalar_t__;  // Either arithmetic or pointer type.
/* By default, we understand bool (as a convenience). */
typedef int bool;
#define false 0
#define true 1

/* Forward declarations */

/* Type definitions */
typedef  int uid_t ;
struct kpersona_info {int persona_id; int /*<<< orphan*/  persona_type; int /*<<< orphan*/  persona_name; int /*<<< orphan*/  persona_info_version; int /*<<< orphan*/  member_0; } ;
typedef  int /*<<< orphan*/  kpersona_uid ;

/* Variables and functions */
 int /*<<< orphan*/  PERSONA_GUEST ; 
 int /*<<< orphan*/  PERSONA_INFO_V1 ; 
 int /*<<< orphan*/  PERSONA_OP_ALLOC ; 
 int /*<<< orphan*/  printf (char*,int) ; 
 int /*<<< orphan*/  strcpy (int /*<<< orphan*/ ,char*) ; 
 int sys_persona (int /*<<< orphan*/ ,int /*<<< orphan*/ ,struct kpersona_info*,int /*<<< orphan*/ *,size_t*) ; 

void* persona_bad_alloc() {
  // let's try to alloc a persona:
  struct kpersona_info info = {0};
  uid_t kpersona_uid = -123;
  size_t kpersona_uid_size = sizeof(kpersona_uid);
  
  info.persona_info_version = PERSONA_INFO_V1;
  strcpy(info.persona_name, "a_name2");
  
  info.persona_id = 235;
  info.persona_type = PERSONA_GUEST;
  
  int perr = sys_persona(PERSONA_OP_ALLOC, 0, &info, NULL/*&kpersona_uid*/, &kpersona_uid_size);
  printf("err: %x\n", perr);
  printf("kpersona_uid: %d\n", kpersona_uid);
  
  return NULL;
}