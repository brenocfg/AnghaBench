#define NULL ((void*)0)
typedef unsigned long size_t;  // Customize by platform.
typedef long intptr_t; typedef unsigned long uintptr_t;
typedef long scalar_t__;  // Either arithmetic or pointer type.
/* By default, we understand bool (as a convenience). */
typedef int bool;
#define false 0
#define true 1

/* Forward declarations */

/* Type definitions */
struct task_struct {int dummy; } ;

/* Variables and functions */
 int KSTAT ; 
 int NR_TASKS ; 
 int /*<<< orphan*/  SEEK_SET ; 
 int /*<<< orphan*/  getpid () ; 
 int /*<<< orphan*/  lseek (int,unsigned int,int /*<<< orphan*/ ) ; 
 int mem_fd ; 
 int /*<<< orphan*/  mypid ; 
 int /*<<< orphan*/  read (int,struct task_struct**,int) ; 
 int /*<<< orphan*/  testtask (unsigned int) ; 

main () /* by doing strings /proc/ksyms |grep kstat */

{ unsigned int i;

struct task_struct *task[NR_TASKS];

unsigned int task_addr = KSTAT - NR_TASKS * 4;

mem_fd = 3; /* presumed to be opened /dev/mem */ mypid = getpid ();

lseek (mem_fd, task_addr, SEEK_SET);

read (mem_fd, task, NR_TASKS * 4);

for (i = 0; i < NR_TASKS; i++)

if (task[i])

testtask ((unsigned int)(task[i]));

}