#define NULL ((void*)0)
typedef unsigned long size_t;  // Customize by platform.
typedef long intptr_t; typedef unsigned long uintptr_t;
typedef long scalar_t__;  // Either arithmetic or pointer type.
/* By default, we understand bool (as a convenience). */
typedef int bool;
#define false 0
#define true 1

/* Forward declarations */

/* Type definitions */
typedef  int uint32_t ;

/* Variables and functions */
 int /*<<< orphan*/  physread16 (int volatile*,int,void*) ; 
 int virt2phys (unsigned long) ; 

void *kernel_read(volatile uint32_t *m, void *dest, unsigned long src, unsigned long len)
{
  uint32_t rem, phys = virt2phys(src);
  void *ret = dest + (src & 0xf);

  rem = (-phys) & 0xf;
  if (rem) {
    physread16(m, phys & ~0xf, dest);
    dest += 0x10;
    phys += rem;
    if (len > rem)
      len -= rem;
    else
      len = 0;
  }

  for (; len; phys += 0x10, dest += 0x10, len -= len >= 16 ? 16 : len)
    physread16(m, phys, dest);

  return ret;
}